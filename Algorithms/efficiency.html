<html>
    <head>
        <meta charset="UTF-8">
        <title>출력결과</title>
    </head>
    <body>
        <script>
          // 1. two pointers algorithm
            // function solution(arr1, arr2){
            //     let answer=[];
            //     let pointer1 = pointer2 = 0;
            //     const arr1Length = arr1.length;
            //     const arr2Length = arr2.length;

            //     while (pointer1 < arr1Length && pointer2 < arr2Length) {
            //       if (arr1[pointer1] < arr2[pointer2]) {
            //         answer.push(arr1[pointer1])
            //         pointer1++;
            //       } else {
            //         answer.push(arr2[pointer2])
            //         pointer2++;                    
            //       }
            //     }

            //     while (pointer1 < arr1Length) answer.push(arr1[pointer1++]);
            //     while (pointer2 < arr2Length) answer.push(arr2[pointer2++]);

            //     return answer;
            // }
            
            // let a=[1, 3, 5];
            // let b=[2, 3, 6, 7, 9];
            // console.log(solution(a, b));
          //2. 공통원소 구하기
          // function solution(arr1, arr2){
          //   let answer=[];
          //   // for (let i = 0; i < arr1.length; i++) {
          //   //   for (let j = 0; j < arr2.length; j++) {
          //   //     let pointer1 = arr1[i];
          //   //     let pointer2 = arr2[j];
          //   //     if (pointer1 === pointer2) answer.push(arr1[i])
          //   //   }
          //   // }
          //   arr1.sort ((a, b) => a-b);
          //   arr2.sort ((a, b) => a-b);            
          //   let pointer1 = pointer2 = 0;
          //   const arr1Length = arr1.length;
          //   const arr2Length = arr2.length;
          
          //   while(pointer1 < arr1Length && pointer2 < arr2Length) {
          //     console.log(arr1[pointer1], arr2[pointer2])
          //     if (arr1[pointer1] === arr2[pointer2]) {
          //       answer.push(arr1[pointer1]);
          //       pointer1 ++;
          //       pointer2 ++;
          //     } else if (arr1[pointer1] < arr2[pointer2]) {
          //       pointer1++;
          //     } else {
          //       pointer2 ++;
          //     }
          //   }

          //   return answer;
          //   }
            
          //   let a=[1, 3, 9, 5, 2];
          //   let b=[3, 2, 5, 7, 8];
          //   console.log(solution(a, b));      
          // 3. 연속부분수열 
          // function solution(m, arr){
          //   let answer = 0;
          //   let left = right = 0;
          //   let sum = 0;

          //   for (let i = 0; i < arr.length; i++) {
          //     right = i;
          //     sum += arr[right];
          //     if (sum === m) answer ++; // 합에 변화가 있을때마다 m 과 같은지 체크해줘야함
          //     while (sum >= m) {
          //       sum -= arr[left];
          //       if (sum === m) answer ++; 
          //       left ++;
          //     }
          //   }
          //   return answer;
          //   }
            
          //   let a=[1, 2, 1, 3, 1, 1, 1, 2];
          //   console.log(solution(6, a));            
          // 4. 연속 부분수열 2
          // function solution(m, arr){
          //   let answer = 0;
          //   let left = right = 0;
          //   let sum = 0;
          //   for (let i = 0; i < arr.length; i++) {
          //     right = i;
          //     sum += arr[right];
          //     while(sum > m) {
          //       sum -= arr[left];
          //       left ++;
          //     }
          //     answer += right - left +1;
          //   }
          //   return answer;
          //   }
            
          //   let a=[1, 3, 1, 2, 3];
          //   console.log(solution(5, a));   
          // 5. 최대 매출
          // function solution(k, arr){
          //   let answer = 0;
          //   let pointer = 0;
          //   let last = arr.length - 3;
            
          //   // while (pointer < last) {
          //     //   const sliced = arr.slice(pointer, pointer + 3)
          //     //   const sum = sliced.reduce((num1, num2) => num1 + num2)
          //     //   if (sum > answer) answer = sum;
          //     //   pointer ++;
          //     // }
          //     // or
          //     // 첫번째 sum 구하기
          //   let sum = 0;
          //   for (let i = 0; i < k; i++) sum += arr[i]
          //   answer = sum;
          //   // window sliding
          //   for (let i = k; i < arr.length; i++) {
          //     sum += (arr[i]-arr[i-k]);
          //     answer = Math.max(answer, sum);
          //   }
          //   return answer;
          // }
            
          // let a=[12, 15, 11, 20, 25, 10, 20, 19, 13, 15];
          // console.log(solution(3, a));             
          // 6. 학급회장 (해시)
          // function solution(s){  
          //   let answer;
          //   let sH = new Map();

          //   for (let x of s) {
          //     if (sH.has(x)) {
          //       sH.set(x, sH.get(x)+1);
          //     } else {
          //       sH.set(x, 1);
          //     }
          //   };
          //   let max = 0;
          //   for (let [key, val] of sH) {
          //     console.log(key, val)
          //     if (val > max) {
          //       max = val
          //       answer = key;
          //     }
          //   }
          //   return answer;
          //   }

          // let str="BACBACCACCBDEDE";
          // console.log(solution(str));       
          // 7. 아나그램
          // function solution(str1, str2){
          //   let answer = 'YES';
          //   let sH = new Map();
              
          //   for (let x of str1) {
          //     if (sH.has(x)) {
          //       sH.set(x, sH.get(x)+1);
          //     } else {
          //       sH.set(x, 1)
          //     }
          //   }
              
          //   for (let x of str2) {
          //     if (!sH.has(x) || sH.get(x) === 0) return 'NO';
          //     sH.set(x, sH.get(x) -1);
          //   }

          //   return answer;
          // }
            
          //   let a="AbaAeCe";
          //   let b="baeeACA";
          //   console.log(solution(a, b));    
          // 8. 모든 아나그램
          function solution(a, b){                  
            function setMap(string) {
              const map = new Map()
              for (x in string) {
                if (!map.has(string[x])) {
                  map.set(string[x], 1)
                } else {
                  map.set(string[x], map.get(string[x])+1);
                }
              };
              return map;
            }

            function compareMaps(map1, map2) {
              let testVal;
              // 사이즈가 같은지 체크
              if (map1.size !== map2.size) return false;
              for (let [key, val] of map1) {
                // 같은 키가 있는지 + 키의 밸류값이 같은지를 체크
                testVal = map2.get(key);
                if (testVal !== val || (testVal === undefined) && !map2.has(key)) {
                  return false;
                }
              }
              return true;
            }            

            // pointer && sliding window
            let answer = 0;
            let pointer = 0;

            const endpoint = b.length-1;
            const ana =  setMap(b);
            for (let i = endpoint; i < a.length; i++) {
              let window = a.slice(pointer, i+1);
              const windowMap = setMap(window)
              if (compareMaps(windowMap, ana)) answer ++;
              pointer++;
            }
            return answer;
          }
            
          let a="bacaAacba";
          let b="abc";
          console.log(solution(a, b));               
        </script>
    </body>
</html>
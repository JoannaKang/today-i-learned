# Chapter 6. 메시지와 인터페이스
## 1. 협력과 메시지
### 1) 클라이언트-서버 모델
* 메시지를 매개로 하는 요청과 응답의 조합의 두 객체 사이의 협력을 구성한다
* 객체들로 구성된 시스템 안의 행동은 아래 두가지 방법으로 명세할 수 있다.
  * 메시지: 객체들이 협력하기 위해 사용할 수 있는 유일한 의사소통 수단 <br> 
    → 메시지 전송 || 메시지 패싱: 한 객체가 다른 객체에게 도움을 요청하는 것
      * 메시지는 오퍼레이션명(opreation name) & 인자(argument)로 구성
  * 메서드: 메시지 수신자가 메시지를 수신했을 때 실제로 실행되는 함수 또는 프로시저

* 용어정리
  * 메시지: 객체가 다른 객체와 협력하기 위해 사용하는 의사소통 매커니즘
  * 퍼블릭 인터페이스: 객체가 의사소통을 위해 외부에 공개하는 메시지의 집합
  * 오퍼레이션: 퍼블릭 인터페이스에 포함된 메시지, 객체가 호출될 수 있는 변환이나 정의에 관한 명세
  * 메서드: 메시지에 응답하기 위해 실행되는 코드블록, 오퍼레이션의 구현(=오퍼레이션과 연관된 알고리즘 또는 절차)
  * 시그니처: 오퍼레이션이나 메서드의 명세를 나타낸 것, 이름과 인자의 목록을 포함

⭐️ 객체의 퍼블릭 인터페이스가 객체의 품질을 결정하기 때문에 결국 메시지가 객체의 품질을 결정한다.

## 2. 인터페이스와 설계 품질
* 좋은 인터페이스란? 최소한 & 추상적인 인터페이스 → 꼭 필요한 오퍼레이션만을 인터페이스에 포함한다.(무엇을 하는지를 표현)
* 퍼블릭 인터페이스의 품질에 영향을 미치는 원칙 & 기법
### 1) 디미터 법칙 (Tell, Don't ask)
  * 객체의 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한하라
  * 클래스가 특정한 조건을 만족하는 대상에게만 메시지를 전송하도록 프로그래밍 해야 한다
    * 모든 클래스 C와 C에 구현된 메서드 M에 대해서, M이 메시지를 전송할 수 있는 모든 객체는 다음에 서술된 클래스의 인스턴스여야 함
      * M의 인자로 전달된 클래스
      * C의 인스턴스 변수의 클래스
    * A.k.a.
      * this 객체
      * 메서드의 매개변수
      * this의 속성
      * this의 속성인 컬렉션의 요소
      * 메서드 내에서 생성된 지역객체
  * 디미터법칙을 따르면 부끄럼 타는 코드(shy code)를 작성할 수 있다: 불필요한 어떤것도 다른 객체에게 보여주지 않으며 다른 객체에 의존하지 않는 코드
    → 클래스를 캡슐화하기 위해 따라야 하는 구체적인 지침을 제공, 객체가 자신을 책임지는 자율적인 존재여야함
  * 인터페이스는 객체가 무엇을 하는지를 서술해야 한다.
  * 메서드의 이름은 어떻게 수행하느냐가 아니라 무엇을 하느냐에 초점을 맞추어 클라이언트 관점에서 동일한 작업을 수행하는 메서드들을 하나의 타입 계층으로 묶어야 한다. (의도를 드러내는 선택자)

### 2) 명령-쿼리 분리 원칙
* 가끔씩은 필요에 따라 물어야 할 때도 있음... 이럴때 명령-쿼리 분리 원칙을 따라야 함
---
💡 용어 정리
* 루틴: 어떤 절차를 묶어 호출 가능하도록 이름을 부여한 기능 모듈, 프로시저와 함수로 구분됨
  * 프로시저(Procedure): 정해진 절차에 따라 내부의 상태를 변경하는 루틴 → 부수효과를 발생시킬 수 있지만 값을 반환할 수 없다.
  * 함수(Function): 어떤 절차에 따라 필요한 값을 계산해서 반환하는 루틴 → 값을 반환할 수 있지만 부수효과를 발생시킬 수 없다.
* 명령과 쿼리는 객체의 인터페이스 측면에서 프로시저와 함수를 부르는 또 다른 이름
  * 명령: 객체의 상태를 수정하는 오퍼레이션 (프로시저와 동일한 개념)
  * 쿼리: 객체와 관련된 정보를 반환하는 오퍼레이션 (함수와 동일한 개념)
--- 
* 명령-쿼리 분리 원칙의 핵심
  * 오퍼레이션은 부수효과를 발생시키는 명령이거나 부수효과를 발생시키지 않는 쿼리중 하나여야 한다 <br>
  → 질문이 답변을 수정해서는 안된다
    * 객체의 상태를 변경하는 명령은 반환값을 가질 수 없다
    * 객체의 정보를 반환하는 쿼리는 상태를 변경할 수 없다
* 명령-쿼리 분리와 참조투명성(Referential transparency)
  * 명령과 쿼리를 분리함으로써 참조투명성의 장점을 누릴 수 있게 됨 <br>
  → 부수효과: 선언된 값이 변경될 수 있는 것 <br>
    e.g) 프로그램에서 x로 선언된 변수를 대입문을 이용해 다른 값으로 변경 가능한 경우 
  → 참조투명성: 어떤 표현식 e가 있을 때 e의 값으로 e가 나타나는 모든 위치를 교체하더라도 결과가 달라지지 않는 특성 (불변성 = 부수효과가 발생하지 않는다) <br>
    e.g) 동일한 입력에 대해 항상 동일한 값을 반환하는 함수 